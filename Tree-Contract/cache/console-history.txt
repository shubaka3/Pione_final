const logs = receipt.logs.map(log => { try { return FactoryInterface.parseLog(log); } catch (e) { return null; } }).filter(parsedLog => parsedLog && parsedLog.name === "AgriSupplyChainCreated");
const FactoryInterface = Factory.interface;
const receipt = await ethers.provider.getTransaction
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory");
const FactoryInterface = Factory.interface;
const receipt = await ethers.provider.getTransactief3d156686437f11e0057b50c1c");
const address = (await (await ethers.provider.getTa648af1def3d156686437f11e0057b50c1c")).logs.map(log => { try { return Factory.interface.parseLog(log); } catch (e) { return null; } }).filter(parsedLog => parsedLog && parsedLog.name === "AgriSupplyChainCreated")[0].args.contractAddr);
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory");
const finalSupplyChains = await factory.getSupplyChainAddresses(companyRegNumber);
const factory = await Factory.attach(factoryAddress); 
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory"); 
const companyRegNumber = "TYT-AGRI-VN"; 
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
const fa
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory"); 
const companyRegNumber = "TYT-AGRI-VN"; 
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
if (finalSupplyChains.length > 0) { console.log("========================================================="); console.log("ğŸš€ KHÃ“A CUá»I CÃ™NG: Äá»ŠA CHá»ˆ SUPPLY CHAIN Cá»¦A TEAM TYT:", finalSupplyChains[0]); console.log("========================================================="); } else { console.log("Lá»—i: KhÃ´ng tÃ¬m tháº¥y Ä‘á»‹a chá»‰ Supply Chain nÃ o cho TYT."); }
if (finalSupplyChains.length > 0) { console.log("ï¿½ï¿½ Äá»ŠA CHá»ˆ SUPPLY CHAIN Cá»¦A TEAM TYT:", finalSupplyChains[0]); } else { console.log("Lá»—i: KhÃ´ng tÃ¬m tháº¥y Ä‘á»‹a chá»‰!"); }
const finalSupplyChains = await factory.getSupplyC
const supplyChains = await factory.getSupplyChainAddresses(companyRegNumber); 
const supplyChains = await factory.getCompanySupplyChains(companyRegNumber);
const factory = await Factory.attach(factoryAddress); 
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory"); 
const companyRegNumber = "TYT-AGRI-VN"; 
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
.exit
}
Â  Â  console.log("Lá»—i: KhÃ´ng tÃ¬m tháº¥y sá»± kiá»‡n táº¡o há»£p Ä‘á»“ng!");
} else {
Â  Â  console.log("=========================================================");
Â  Â  console.log(supplyChainAddress);Â 
Â  Â  console.log("ğŸš€ KHÃ“A CUá»I CÃ™NG: Äá»ŠA CHá»ˆ SUPPLY CHAIN Cá»¦A TEAM TYT (DÃ™NG CHO API):");
Â  Â  console.log("==========================================
Â  Â  const supplyChainAddress = logs[0].args.contractAddr;
if (logs.length > 0) {
const logs = receipt.logs.filter(log => log.fragment && log.fragment.name === "AgriSupplyChainCreated");
console.log("-> Táº¡o há»£p Ä‘á»“ng thÃ nh cÃ´ng. Äang láº¥y Ä‘á»‹a chá»‰...");
const receipt = await txCreate.wait();
const txCreate = await factory.createSupplyChain(companyRegNumber, "Chuoi cung ung Cay Xanh TYT", "He thong truy vet cho cac lo hang cay trong");
console.log("-> Äang gá»­i giao dá»‹ch táº¡o Há»£p Ä‘á»“ng Chuá»—i Cung á»©ng...");
console.log(`-> ÄÄƒng kÃ½ cÃ´ng ty TYT thÃ nh cÃ´ng! MÃ£: ${companyRegNumber}`);
await txReg.wait();
const txReg = await factory.registerCompany(companyRegNumber, "TYT Farm Solutions", deployer.address);
console.log("-> Äang gá»­i giao dá»‹ch Ä‘Äƒng kÃ½ cÃ´ng ty...");
const companyRegNumber = "TYT-AGRI-VN";
const [deployer] = await ethers.getSigners();
const factory = await Factory.attach(factoryAddress); 
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory"); 
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
console.log("-> Táº¡o há»£p Ä‘á»“ng thÃ nh cÃ´ng. Äang láº¥y Ä‘á»‹a chá»‰...");
const receipt = await txCreate.wait();
ctory.createSupplyChain(companyRegNumber, "Chuoi cung ung Cay Xanh TYT", "He thong truy vet cho cac lo hang cay trong");
console.log("-> Äang gá»­i giao dá»‹ch táº¡o Há»£p Ä‘const txCreate = await fa
console.log(`-> ÄÄƒng kÃ½ cÃ´ng ty TYT thÃ nh cÃ´ng! MÃ£: ${companyRegNumber}`);
await txReg.wait();
const txReg = await factory.registerCompanyaddress);
console.log("-> Äang gá»­i giao dá»‹ch Ä‘Äƒng kÃ½ cÃ´ng ty...");
const companyRegNumber = "TYT-AGRI-VN";
const [deployer] = await ethers.getSigners();
const factory = await Factory.attach(factoryAddress);Â 
const Factory = await ethers.getContractFactory("DemoFarmTraceabilityFactory");Â 
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61";Â 
const companyRegNumber = "TYT-AGRI-VN";
const [deployer] = await ethers.getSigners();
const factory = await Factory.attach(factoryAddress); 
const Factory = await ethers.getContractFactory("TYTFarmFactory");
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
Â  Â  console.log("Lá»—i: KhÃ´ng tÃ¬m tháº¥y sá»± kiá»‡n táº¡o há»£p Ä‘á»“ng!");
} else {
Â  Â  console.log("=========================================================");
Â  Â  console.log(supplyChainAddress);Â 
Â  Â  console.log("ğŸš€ KHÃ“A CUá»I CÃ™NG: Äá»ŠA CHá»ˆ SUPPLY CHAIN Cá»¦A TEAM TYT (DÃ™NG CHO API):");
Â  Â  console.log("=========================================================");
Â  Â  const supplyChainAddress = logs[0].args.contractAddr;
if (logs.length > 0) {
const logs = receipt.logs.filter(log => log.fragment && log.fragment.name === "AgriSupplyChainCreated");
console.log("-> Táº¡o há»£p Ä‘á»“ng thÃ nh cÃ´ng. Äang láº¥y Ä‘á»‹a chá»‰...");
const receipt = await txCreate.wait();
g cay trong");
const txCreate = await factory.createSupplyChain(companyRegNumber, "Chuoi cung ung Cay Xanh TYT", "He thong truy vet cho cac lo han
console.log("-> Äang gá»­i giao dá»‹ch táº¡o Há»£p Ä‘á»“ng Chuá»—i Cung á»©ng...");
console.log(`-> ÄÄƒng kÃ½ cÃ´ng ty TYT thÃ nh cÃ´ng! MÃ£: ${companyRegNumber}`);
await txReg.wait();
const txReg = await factory.registerCompany(companyRegNumber
console.log("-> Äang gá»­i giao dá»‹ch Ä‘Äƒng kÃ½ cÃ´ng ty...");
const companyRegNumber = "TYT-AGRI-VN";Â 
const [deployer] = await ethers.getSigners();
const factory = await Factory.attach(factoryAddress);Â 
const Factory = await ethers.getContractFactory("TYTFarmFactory");
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61";Â 
    }
        console.log("Lá»—i: KhÃ´ng tÃ¬m tháº¥y sá»± kiá»‡n táº¡o há»£p Ä‘á»“ng! Vui lÃ²ng kiá»ƒm tra láº¡i log giao dá»‹ch trÃªn Zeroscan.");
    } else {
        console.log("Äá»‹a chá»‰ Supply Chain (Ethers v5):", supplyChainAddress);
        const supplyChainAddress = event.args.contractAddr;
    if (event) {
    const event = receipt.events.find(e => e.event === "AgriSupplyChainCreated");
    // Thá»­ cÃ¡ch láº¥y event cÅ© hÆ¡n (náº¿u báº¡n dÃ¹ng ethers v5)
} else {
    console.log("=========================================================");
    console.log(supplyChainAddress); 
    console.log("ğŸš€ KHÃ“A CUá»I CÃ™NG: Äá»ŠA CHá»ˆ SUPPLY CHAIN Cá»¦A TEAM TYT (DÃ™NG CHO API):");
    console.log("=========================================================");
    const supplyChainAddress = logs[0].args.contractAddr;
if (logs.length > 0) {
const logs = receipt.logs.filter(log => log.fragment && log.fragment.name === "AgriSupplyChainCreated");
hardhat má»›i)
// (Sá»­ dá»¥ng cÃ¡ch láº¥y logs cho ethers v6/
// 4. Láº¥y Äá»‹a chá»‰ Supply Chain (Káº¿t quáº£ cuá»‘i cÃ¹ng)
console.log("Táº¡o há»£p Ä‘á»“ng thÃ nh cÃ´ng. Äang láº¥y Ä‘á»‹a child_process
const receipt = await txCreate.wait();
anh TYT", "He thong truy vet cho cac lo hang cay trong");
consconst txCreate = await factory.createSupplyChain(companyRegNumber, "Chuoi cung ung Cay X
 3. Táº¡o Há»£p Ä‘á»“ng Chuá»—i Cung á»©ng (Giao dá»‹ch 2)
//
console.log(`ÄÄƒng kÃ½ cÃ´ng ty TYT thÃ nh cÃ´ng! MÃ£: ${companyRegNumber}`);
const txReg = await factory.registerCompany(compawait txReg.wait();
nsole.log("Äang gá»­i giao dá»‹ch Ä‘Äƒng kÃ½ cÃ´ng ty...");
co
// 2. ÄÄƒng kÃ½ CÃ´ng ty TYT (Giao dá»‹ch 1)
cconst companyRegNumber = "TYT-AGRI-VN"; // MÃ£ Ä‘Äƒng kÃ½ cÃ´ng ty
factory = await factory.attach(factoryAddress); 
const Factory = await econst 
// 1. Káº¿t ná»‘i vá»›i Factory
const factoryAddress = "0x998316cAe68113FA2EEA654E59685951980Eef61"; 
// âš ï¸ Äá»‹a chá»‰ Factory cá»§a báº¡n