<!DOCTYPE html>
<html lang="vi"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDDC - Plant Management (V23 - Hợp nhất WebRTC/AI)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="style.css">

</head>
<body class="h-full"> 
    <div id="loader" class="loader-overlay view-hidden"> <div class="loader-spinner"></div>
    </div>

    <div id="toast-notification">Notification message</div>

    <aside id="floating-sidebar" class="w-64 flex-shrink-0 flex flex-col p-4 fixed top-0 left-0 h-full z-50 is-hidden">
        <div class="text-center py-4 border-b border-gray-700">
             <h1 class="text-2xl font-bold text-white tracking-wide">MDDC</h1>
             <p class="text-sm text-gray-400">Plant Management</p>
        </div>
        <nav id="main-nav" class="mt-8 space-y-2 flex-grow">
            <a href="#" class="nav-link active" data-view="dashboard">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-link" data-view="analytics">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h12A2.25 2.25 0 0020.25 14.25V3M3.75 21h16.5M16.5 3.75h.008v.008h-.008V3.75z" /></svg>
                <span>Analytics</span>
            </a>
            <a href="#" class="nav-link" data-view="sound">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3 11.25v2.25c0 .966.784 1.75 1.75 1.75h.041m-1.791 0c.041.32.11.633.204.938.144.47.33.91.559 1.306.27.469.59.883.958 1.23.31.299.648.56.998.78.36.225.75.405 1.158.542m1.158 0c.32.12.656.213 1.006.276.364.065.74.1.1.118.42.02.846-.015 1.264-.083.43-.07.85-.18 1.252-.33m-2.516 0c.428.14.87.234 1.32.287.468.055.943.08 1.422.08.479 0 .953-.025 1.422-.08.45-.053.892-.147 1.32-.287m2.516 0c.408-.137.798-.317 1.158-.542.35-.22.688-.48.998-.78.368-.347.688-.76.958-1.23.228-.396.415-.836.559-1.306.094-.305.163-.618.204-.938m-1.791 0h.041c.966 0 1.75-.784 1.75-1.75v-2.25m-19.5 0v2.25c0 .966.784 1.75 1.75 1.75h.041m1.79-1.75c-.041.32-.11.633-.204.938-.144.47-.33.91-.559 1.306-.27.469-.59.883-.958 1.23-.31.299-.648.56-.998.78-.36.225-.75-.405-1.158.542m1.158 0c.32.12.656.213 1.006.276.364.065.74.1.1.118.42.02.846-.015 1.264-.083.43-.07.85-.18 1.252-.33m2.516 0c.428.14.87.234 1.32.287.468.055.943.08 1.422.08.479 0 .953-.025 1.422-.08.45-.053.892-.147 1.32-.287m-2.516 0c.408-.137.798-.317 1.158-.542.35-.22.688-.48.998-.78.368-.347.688-.76.958-1.23.228-.396.415-.836.559-1.306.094-.305.163-.618.204-.938m1.791 0h-.041c-.966 0-1.75-.784-1.75-1.75v-2.25m0 0v-2.25c0-.966.784-1.75 1.75-1.75h.041m-1.791 0c.041-.32.11-.633.204-.938.144-.47.33-.91.559-1.306.27-.469.59-.883.958-1.23.31-.299.648-.56.998-.78.36-.225.75-.405 1.158-.542m1.158 0c.32-.12.656-.213 1.006-.276.364-.065.74-.1.1.118.42-.02.846-.015 1.264-.083.43-.07.85-.18 1.252-.33m-2.516 0c.428-.14.87-.234 1.32-.287.468.055.943.08 1.422.08.479 0 .953-.025 1.422-.08.45-.053.892-.147 1.32-.287m2.516 0c.408-.137.798-.317 1.158-.542.35-.22.688-.48.998-.78.368-.347.688-.76.958-1.23.228-.396.415-.836.559-1.306.094-.305.163-.618.204-.938m-1.791 0h.041c.966 0 1.75.784 1.75 1.75v2.25m-19.5 0v-2.25c0-.966.784-1.75 1.75-1.75h.041m1.79 1.75c-.041-.32-.11-.633-.204-.938-.144-.47-.33-.91-.559-1.306-.27-.469-.59-.883-.958-1.23-.31-.299-.648-.56-.998-.78-.36-.225-.75-.405-1.158-.542m1.158 0c.32-.12.656-.213 1.006-.276.364-.065.74-.1.1.118.42-.02.846-.015 1.264-.083.43-.07.85-.18 1.252-.33m2.516 0c.428-.14.87-.234 1.32.287.468.055.943.08 1.422.08.479 0 .953-.025 1.422-.08.45-.053.892-.147 1.32-.287m-2.516 0c.408-.137.798-.317 1.158-.542.35-.22.688-.48.998-.78.368-.347.688-.76.958-1.23.228-.396.415-.836.559-1.306.094-.305.163-.618.204-.938m1.791 0h-.041c-.966 0-1.75.784-1.75 1.75v2.25" /></svg>
                <span>Sound Detect</span>
            </a>
            <a href="#" class="nav-link" data-view="ai">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.424.35.534.954.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.333.183-.582.495-.645.87l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076.124.072-.044.146-.087.22-.128.332-.183.582.495.645.87l.213-1.28z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                <span>AI-Tool</span>
            </a>
        </nav>
        <a href="#" id="logout-btn" class="nav-link mt-4 border border-gray-700"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" /></svg>
            <span>Đăng xuất</span>
        </a>
    </aside>

    <div id="login-view" class="h-full w-full flex items-center justify-center p-4"> <div class="w-full max-w-md p-8 space-y-8 card">
            <h1 class="text-3xl font-bold text-center text-white">MDDC Login</h1>
            <form id="login-form" class="space-y-6">
                <input id="username" type="text" required class="w-full form-input" placeholder="Username" value="admin">
                <input id="password" type="password" required class="w-full form-input" placeholder="Password" value="123">
                <p id="login-error" class="text-red-400 text-sm view-hidden"></p>
                <button type="submit" class="w-full btn btn-primary">Login</button>
            </form>
        </div>
    </div>

    <div id="app-view" class="h-full w-full flex flex-col view-hidden">
        <nav class="w-full p-4 flex justify-between items-center border-b border-gray-700 bg-gray-800/70 backdrop-blur-md flex-shrink-0 z-20">
            <div class="flex items-center gap-4">
                <button id="sidebar-toggle-btn" class="btn btn-secondary p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
                </button>
                 <h1 id="view-title" class="text-2xl font-bold text-white tracking-wide">Dashboard</h1>
            </div>
            <div class="flex items-center gap-4">
                <span id="welcome-user" class="text-lg hidden sm:block"></span>
                </div>
        </nav>

        <div id="content-area" class="flex-grow relative">
            <main id="dashboard-view" class="absolute inset-0 p-4 sm:p-6 overflow-y-auto custom-scrollbar">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <h2 class="text-3xl font-bold text-white">Dashboard</h2>
                    <button id="add-product-btn" class="btn btn-success w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                        Add New Plant
                    </button>
                </div>
                <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                </div>
            </main>

            <main id="detail-view" class="absolute inset-0 p-4 sm:p-6 overflow-y-auto view-hidden flex flex-col custom-scrollbar">
                <button id="back-to-dashboard-btn" class="btn btn-secondary mb-4 px-4 py-2 text-sm self-start flex-shrink-0">&larr; Back to Dashboard</button>
                <div class="flex-grow grid grid-cols-1 lg:grid-cols-10 gap-6">
                    <div class="lg:col-span-7 flex flex-col card p-4 gap-4">
                        <div class="flex justify-between items-center flex-shrink-0">
                            <h2 id="tree-name" class="text-xl font-bold text-white"></h2>
                            <div class="flex gap-2">
                                <button id="view-mode-normal" class="btn btn-secondary px-3 py-1 text-sm">Normal View</button>
                                <button id="view-mode-ai" class="btn btn-primary px-3 py-1 text-sm">AI Detection</button>
                            </div>
                        </div>
                        <div class="flex-grow relative rounded-lg overflow-hidden min-h-[300px] sm:min-h-[400px] bg-black" id="video-container">
                            <video id="realtime-video" class="absolute top-0 left-0 w-full h-full object-contain" autoplay playsinline muted></video>
                            <canvas id="overlay-canvas" class="absolute top-0 left-0 w-full h-full object-contain pointer-events-none opacity-0"></canvas> <div id="detection-container" class="absolute top-0 left-0 w-full h-full"></div>
                            <div id="stream-status" class="absolute inset-0 flex items-center justify-center text-gray-400 text-lg">Waiting for video stream...</div>
                        </div>
                    </div>
                    <div class="lg:col-span-3 flex flex-col card p-6">
                        <div id="plant-actions" class="mb-4 pt-2 space-y-3">
                            <h3 class="text-xl font-bold text-white border-b border-gray-600 pb-3 mb-4 flex-shrink-0">Điều khiển</h3>
                            <button id="water-plant-btn" class="btn btn-primary w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625a3.375 3.375 0 00-3.375 3.375v11.25c0 1.036.84 1.875 1.875 1.875h12.75c1.036 0 1.875-.84 1.875-1.875V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" /></svg>
                                <span>Tưới cây (100ml)</span>
                            </button>
                            <button id="fertilize-plant-btn" class="btn btn-success w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375" /></svg>
                                <span>Bón phân (10g)</span>
                            </button>
                            <button id="harvest-plant-btn" class="btn btn-warning w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.5 2.5m2.5-2.5l2.5-2.5M13.684 16.6l-2.5-2.5m2.5 2.5l2.5 2.5m-5-5l-2.5-2.5m2.5 2.5l-2.5 2.5M15.042 21.672L13.684 16.6M11.625 6.375l-1.68-1.68a.75.75 0 00-1.06 0l-1.68 1.68m3.36 0l1.68 1.68a.75.75 0 010 1.06l-1.68 1.68m-3.36 0l-1.68-1.68a.75.75 0 00-1.06 0l-1.68 1.68m3.36 0l1.68 1.68a.75.75 0 010 1.06l-1.68 1.68" /></svg>
                                <span>Thu hoạch</span>
                            </button>
                            <button id="fill-water-btn" class="btn btn-secondary w-full">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
                                <span>Đổ đầy bình chứa</span>
                            </button>
                        </div>
                        <h3 class="text-xl font-bold text-white border-b border-gray-600 pb-3 mb-4 flex-shrink-0">Thông tin cây trồng</h3> <div class="space-y-4 flex-grow custom-scrollbar overflow-y-auto pr-2">
                            <div class="flex justify-between items-center"><span class="text-gray-400">Thời gian:</span><span id="plant-time" class="text-white font-medium text-lg">--:--:--</span></div>
<div class="space-y-4 flex-grow custom-scrollbar overflow-y-auto pr-2">
    <div class="flex justify-between items-center">
        <span class="text-gray-400">Thời gian:</span>
        <span id="plant-time" class="text-white font-medium text-lg">--:--:--</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Thời tiết:</span>
        <span id="plant-weather" class="text-white font-medium">--</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Nhiệt độ:</span>
        <span id="plant-temp" class="text-white font-medium">-- °C</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Độ ẩm (Đất):</span>
        <span id="plant-humidity" class="text-white font-medium">-- %</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Ánh sáng:</span>
        <span id="plant-light" class="text-white font-medium">-- lux</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Mực nước:</span>
        <span id="plant-water" class="text-white font-medium">-- %</span>
    </div>
    
    <div class="flex justify-between items-center">
        <span class="text-gray-400">Độ pH:</span>
        <span id="plant-ph" class="text-white font-medium">--</span>
    </div>

    <div class="flex justify-between items-center">
        <span class="text-gray-400">Vị trí:</span>
        <span id="plant-location" class="text-white font-medium">--</span>
    </div>
</div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">Vị trí:</span><span id="plant-location" class="text-white font-medium">--</span></div>
                        </div>
                        <div id="ai-results-container" class="mt-4 pt-4 border-t border-gray-600">
                            <h4 class="text-md font-semibold text-white mb-2">Kết quả phân tích AI</h4>
                            <div id="ai-results-content" class="text-gray-400 text-sm space-y-1">
                                <p>Chưa có dữ liệu.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <main id="analytics-view" class="absolute inset-0 p-4 sm:p-6 view-hidden custom-scrollbar overflow-y-auto">
                <div id="analytics-plant-grid-view">
                    <h2 class="text-3xl font-bold text-white mb-6">Chọn cây để xem lịch sử</h2>
                    <div id="analytics-product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        </div>
                </div>

                <div id="analytics-history-view" class="view-hidden">
                    <button id="analytics-back-btn" class="btn btn-secondary mb-4 px-4 py-2 text-sm self-start flex-shrink-0">&larr; Quay lại danh sách</button>
                    <h2 id="analytics-history-title" class="text-3xl font-bold text-white mb-6"></h2>

                    <div class="flex flex-col md:flex-row gap-6">
                        
                        <div id="history-timeline-container" class="w-full md:w-2/3">
                            <ol id="history-timeline">
                                </ol>
                        </div>

                        <div id="qr-code-section" class="w-full md:w-1/3">
                            <div class="card p-4 sticky top-4"> <h4 class="text-lg font-semibold text-white mb-3">Chia sẻ Lộ trình</h4>
                                <p class="text-sm text-gray-400 mb-4">
                                    Quét mã QR này bằng điện thoại của bạn để xem hoặc chia sẻ lịch sử chăm sóc công khai.
                                </p>
                                <div id="qr-code-display" class="flex justify-center items-center bg-white p-4 rounded-lg aspect-square">
                                    </div>
                            </div>
                        </div>

                    </div>
                </div>
            </main>

            <main id="sound-view" class="absolute inset-0 p-4 sm:p-6 view-hidden">
                <div class="card h-full w-full flex flex-col p-6">
                    <h2 class="text-3xl font-bold text-white mb-6">Sound Detection</h2>
                    <p class="text-gray-400 mb-4">Hệ thống đang lắng nghe âm thanh xung quanh...</p>
                    
                    <div id="sound-visualizer-container" class="w-full h-48 rounded-lg overflow-hidden relative">
                        <canvas id="sound-canvas" class="absolute inset-0 w-full h-full"></canvas>
                        <div class="absolute inset-0 border border-gray-700 rounded-lg pointer-events-none"></div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <p class="text-lg text-gray-400">Âm thanh phát hiện:</p>
                        <h3 id="sound-label" class="text-3xl font-bold text-primary-accent mt-2">...</h3>
                    </div>

                    <div id="sound-response-panel" class="mt-8 p-6 rounded-lg bg-gray-900/50 border border-gray-700">
                        <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-3 text-primary-accent">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l9 7.5" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.5v.007c0 .552.448 1 1 1h.008c.552 0 1-.448 1-1V4.5c0-.552-.448-1-1-1H4.75c-.552 0-1 .448-1 1Zm0 6v.007c0 .552.448 1 1 1h.008c.552 0 1-.448 1-1V10.5c0-.552-.448-1-1-1H4.75c-.552 0-1 .448-1 1Zm0 6v.007c0 .552.448 1 1 1h.008c.552 0 1-.448 1-1V16.5c0-.552-.448-1-1-1H4.75c-.552 0-1 .448-1 1Z" />
                            </svg>
                            Hệ thống Phản hồi
                        </h4>
                        
                        <div id="sound-response-content" class="view-hidden">
                            <p id="sound-response-status" class="text-xl font-bold text-yellow-400">...</p>
                            <p id="sound-response-desc" class="text-gray-400 mt-1">...</p>
                        </div>
                        
                        <div id="sound-response-default" class="text-gray-500 text-center py-2">
                            <p>Hệ thống đang ở chế độ chờ...</p>
                        </div>
                    </div>
                    </div>
            </main>
                    
<main id="ai-view" class="absolute inset-0 p-4 sm:p-6 view-hidden overflow-y-auto custom-scrollbar">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"> 
        
        <div class="flex flex-col">
            <h2 class="text-3xl font-bold text-white mb-6 flex-shrink-0">Phân tích Bệnh Hại Qua Ảnh</h2>
            
            <input type="file" id="ai-image-input" class="hidden" accept="image/jpeg, image/png"> 
            
            <div id="ai-image-preview" class="flex-grow card bg-gray-900/50 border-2 border-dashed border-gray-600 hover:border-primary-accent hover:bg-gray-800/60 transition-all duration-300 ease-in-out flex items-center justify-center p-4 relative min-h-[300px] lg:min-h-0">
                
                <label for="ai-image-input" id="ai-image-preview-placeholder" class="text-center text-gray-400 cursor-pointer p-8 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-20 h-20 mx-auto mb-4 opacity-40">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z" />
                    </svg>
                    <h3 class="text-xl font-semibold text-white">Nhấn để tải ảnh lên</h3>
                    <p class="mt-2">Hoặc kéo và thả tệp vào đây</p>
                    <p class="text-sm text-gray-500 mt-4">(Hỗ trợ: .jpg, .png.</p>
                </label>
                
            </div>
        </div>

        <div class="flex flex-col">
            <h2 class="text-3xl font-bold text-white mb-6 flex-shrink-0">Kết quả Phân tích</h2> 
            
            <div id="ai-results-panel" class="flex-grow card p-6 relative min-h-[300px] lg:min-h-0"> 
                
                <div id="ai-processing-overlay" class="absolute inset-0 bg-gray-800/90 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-lg view-hidden p-4 text-center">
                    <div class="loader-spinner mb-4"></div> <p class="text-xl font-semibold text-white">Đang phân tích ảnh...</p>
                    <p id="ai-processing-timer" class="text-lg text-gray-300 mt-2" style="display: none;"></p>
                </div>

                <div id="ai-results-content-real" class="relative z-0 h-full overflow-y-auto custom-scrollbar pr-2 flex flex-col items-center justify-center"> 
                    
                    <div class="text-center text-gray-500 p-8">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-20 h-20 mx-auto mb-4 opacity-40">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0M3.75 18H7.5m3-6h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0M3.75 12H7.5" />
                        </svg>
                        <h3 class="text-xl font-semibold text-gray-400">Chưa có kết quả</h3>
                        <p class="mt-2">Kết quả phân tích sẽ hiển thị ở đây<br>sau khi bạn tải ảnh lên.</p>
                    </div>

                </div>
            </div>
        </div>

    </div>
</main>
        </div>
    </div>
    
    <div id="add-product-modal" class="modal-hidden fixed inset-0 bg-black/70 items-center justify-center z-50 p-4">
        <div class="card w-full max-w-lg p-6 relative">
            <h3 class="text-2xl font-bold text-white mb-4">Add New Plant</h3>
            <form id="add-product-form" class="space-y-4">
                 <input id="productName" type="text" required class="w-full form-input" placeholder="Plant Name (e.g., Cây Táo 01)">
                 <input id="productSpecies" type="text" required class="w-full form-input" placeholder="Plant Species (e.g., Táo)">
                 <input id="productLocation" type="text" required class="w-full form-input" placeholder="Location (e.g., Lô A, Giàn 01)">
                <div class="flex justify-end gap-4 pt-4">
                    <button type="button" id="add-product-cancel-btn" class="btn btn-danger">Cancel</button>
                    <button type="submit" class="btn btn-success">Add</button>
                </div>
            </form>
        </div>
    </div>

    <!-- <div id="alert-modal" class="modal-hidden fixed inset-0 bg-black/70 items-center justify-center z-50 p-4"> -->
    <div id="alert-modal" class="modal-hidden fixed inset-0 bg-black/15 items-center justify-center z-50 p-4">
        <div class="card w-full max-w-md p-6 relative text-center">
            <svg class="w-16 h-16 text-warning mx-auto mb-4" fill="none" stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.008v.008H12v-.008Z"></path></svg>
            <h3 class="text-2xl font-bold text-white mb-3">Cảnh báo!</h3>
            <p id="alert-message" class="text-gray-300 mb-6">Phát hiện tiếng động lạ trong vườn của bạn!</p>
            <div class="flex justify-center">
                <button type="button" id="alert-close-btn" class="btn btn-primary">Đã hiểu</button>
            </div>
        </div>
    </div>

<script src="https://vmentor.emg.edu.vn/ui/embed.js?encryption_api=18f3fd02-5a1d-4782-b74b-4f6388747f5c&encryption_secret=99e79fba-8666-4cdf-9550-bf82b492321f&email=user@example.com"></script>
<script type="module" src="script.js"></script>

<!-- <script src="https://ats.thienleadai.id.vn/ui/embed.js?encryption_api=d6a65185-5569-49d6-8df1-f6e0c8cb0854&encryption_secret=null&email=user@example.com"></script> -->
</body>
</html>